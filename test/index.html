<!DOCTYPE html>
<html ng-app="MRTest">
<head>
    <title></title>
</head>
<body mr-controller="testCtrl" mr-backend="local" mr-model="fighter">
<label for="query"></label><input type="text" id="query" ng-model='te'>
<div>
    <p ng-repeat="fighter in LQ.docs">
        {{ fighter }}
    </p>
</div>

<script src="/socket.io/socket.io.js"></script>

<script src="/bower_components/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/bower_components/angular/angular.js" type="text/javascript"></script>
<script type="text/javascript" src="/bower_components/angular-moment/angular-moment.min.js"></script>
<script src="/rpc/rpc-client-angular.js"></script>
<script type="text/javascript" src="/moonridge-angular-client.js"></script>
<script type="text/javascript">
    angular.module('MRTest', ['Moonridge']).controller('testCtrl', function ($scope) {

        $scope.model.liveQuery({limit: 8, skip: 0, sort: 'name'}).then(function (LQ) {
            console.log(LQ);
            $scope.LQ = LQ;
        });
    }).run(function ($MR, $q, $timeout) {
        var dfd = $q.defer();
        $MR('local', dfd.promise);
        $timeout(function () {
            //just an example, in real application you would use here some auth token instead of nick
            dfd.resolve({url: 'http://localhost:8080', hs: { query: "nick=capaj" } } );
        }, 900)
    });
</script>
</body>
</html>